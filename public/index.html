<!DOCTYPE html>
<html>
<head>
<title>FB Sender</title>
</head>
<body>
<h2>FB COOKIE LOGIN</h2>
<textarea id="cookie" placeholder="Enter Facebook Cookie"></textarea>
<button onclick="login()">Login</button>

<hr>

<h3>Send Message</h3>
<select id="mode">
    <option value="singleUID">Single UID</option>
    <option value="group">Group Thread</option>
    <option value="bulk">Bulk UIDs</option>
    <option value="loop">Auto Loop</option>
</select>

<br><br>

<input id="target" placeholder="UID / Thread ID">
<br><br>

<textarea id="message" placeholder="Message"></textarea>
<br><br>

<textarea id="bulk" placeholder="Bulk UIDs (comma separated)"></textarea>
<br><br>

<input id="delay" type="number" value="2000"> <label>Loop Delay (ms)</label>
<br><br>

<button onclick="start()">START</button>
<button onclick="stop()">STOP</button>

<pre id="status"></pre>

<script>
async function login() {
    const cookie = document.getElementById("cookie").value;
    await fetch("/login", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ cookie }) });
}

async function start() {
    const data = {
        mode: document.getElementById("mode").value,
        target: document.getElementById("target").value,
        message: document.getElementById("message").value,
        delay: parseInt(document.getElementById("delay").value),
        bulk: document.getElementById("bulk").value.split(",").map(v => v.trim())
    };
    await fetch("/start", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(data) });
}

async function stop() {
    await fetch("/stop", { method: "POST" });
}

setInterval(async () => {
    const res = await fetch("/status");
    const data = await res.json();
    document.getElementById("status").textContent = JSON.stringify(data, null, 2);
}, 1000);
</script>
</body>
</html>
